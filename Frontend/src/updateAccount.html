<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="style.css">
    <title>Update Account</title>
    <script src="../logic/helper.js"></script>
</head>

<script>
    const user = JSON.parse(localStorage.getItem('user'));
    if (user === undefined) {
        window.location.href = 'login.html';
    }
    if (getUserAccessLevel() === 'guest'){
        redirectMenu()
    }
    document.addEventListener('DOMContentLoaded', function() {
    renderHeader_signOut();

    function renderUpdAccForm(){
        const user = JSON.parse(localStorage.getItem('user'))
        document.getElementById("Fname").value = user.fname
        document.getElementById("Lname").value = user.lname
        document.getElementById("Email").value = user.email
        document.getElementById("Pnum").value = user.pnum
        document.getElementById("Username").value = user.username
    }

    renderUpdAccForm()

    }
);
</script>

<body>
    <main>
        <div id="header">
            <h2>Update Account Info</h2>
        </div>
        <div id="createacct">
            <form id="accountForm">
                <h2>Current Information:</h2>
                <label for="accountFname">First Name:</label><br>
                <input type="text" id="Fname" name="Fname" required><br>

                <label for="accountLname">Last Name:</label><br>
                <input type="text" id="Lname" name="Lname" required><br>

                <label for="accountEmail">Email:</label><br>
                <input type="email" id="Email" name="Email" required><br>

                <label for="accountPnum">Phone Number:</label><br>
                <input type="text" id="Pnum" name="Pnum" required><br>

                <label for="accountUsername">Username:</label><br>
                <input type="text" id="Username" name="Username" required><br>
                <br>
                <button class="styled-box" type="submit" id="updateAccount" >Modify</button>
            </form>
        </div>
    </main>
    <footer>
    </footer>
</body>
<script type="module">
    import {updateAccount} from "../logic/PATCH.logic.js"
    document.addEventListener('DOMContentLoaded', function() {
        document.getElementById("updateAccount").addEventListener("click", updateAccount)
    })
</script>

</html>