<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="style.css">
    <script src="../logic/helper.js"></script>
    <title>Admin Panel</title>
</head>
<script>
    document.addEventListener('DOMContentLoaded', function() {
    renderHeader_signOut();
    const accessLevel = getUserAccessLevel()
    if (accessLevel === "guest" || accessLevel === "user"){
        redirectMenu();
    }
    renderAdminPanel();

    });
</script>

<body>
    <main>
        <div id="header">
            <h2>Admin Panel</h2>
        </div>
        <ul id="adminPanelList">    
            <div class="admin-control" id="deleteAccount">
                <form id="deleteAccForm">
                    <h2><u>Delete Account</u></h2>
                    
    
                    <table id="deleteAccountTable">
                        <thead>
                           
                        </thead>
                        <tbody>
                           
                        </tbody>
                    </table>
                    <br>
                    <input type="text" id="accountSearchInput" placeholder="Search Account">
                    <br>
                    <br>
                    <button id="searchAccount">
                        Search Account
                    </button>
                </form>
            </div>
            <br>
        
            <div class="admin-control">
                <form id="deletePostForm">
                    <h2><u>Delete Post</u></h2>
                    
                    <table id="deletePostTable">
                        <thead>
                           
                        </thead>
                        <tbody>
                            
                        </tbody>
                    </table>
                    <input type="text" id="postSearchInput" placeholder="Search Post">
                    <br>
                    <br>
                    <button id="searchPost">
                        Search Post
                    </button>
                </form>
            </div>
            <br>
        
            <div class="admin-control">
                <form id="deleteCommentForm">
                    <h2><u>Delete Comment</u></h2>
                    
                    <table id="deleteCommentTable">
                        <thead>
                           
                        </thead>
                        <tbody>
                            
                        </tbody>
                    </table>
                    <br>
                    
                    <input type="text" id="postID" placeholder="Post ID" required><strong style="color:red;">*<sup style="font-size: x-small;">Required</sup></strong>
                    <br>
                    <br>
                    <input type="text" id="commentSearchInput" placeholder="Search Comment">
                    <br>
                    <br>
                    <button id="searchComment">
                        Search Comment
                    </button>
                </form>
            </div>
            <br>
    
            <div class="admin-control" id="changeAccess">
                <form id="changeAccessLvlForm">
                    <h2><u>Change Access Level</u></h2>
                    
                    <table id="promoteAccTable">
                        <thead>
                            
                        </thead>
                        <tbody>
                            
                        </tbody>
                    </table>
                    <input type="text" id="promoteAcc" placeholder="Search Account">
                    <br>
                    <br>
                    <button id="searchAcc">
                        Search Account
                    </button>
                </form>
            </div>
        </ul>
    
        <div id="popup">
            <form id="updateAccessLevelModalForm">
                
                <div>
                    id:<input type="text" id="id" readonly>	
                    first name:<input type="text" id="fname" readonly>
                    last name: <input type="text" id="lname" readonly>
                    fullname: <input type="text" id="fullname" readonly>
                    email: <input type="text" id="email" readonly>
                    password: <input type="text" id="pwd" readonly>
                    phone number:<input type="text" id="pnum" readonly>
                    username:<input type="text" id="username" readonly>
                    Access Level:
                    <select id="newAccessLevel" name="newAccessLevel" placeholder="Select Privilege">
                        <option value="0">Select Priv</option>
                        <option value="user">User</option>
                        <option value="verified user">Verified User</option>
                        <option value="admin">Admin</option>
                    </select>
                </div>
                <button type="submit" id="promoteButton">
                    Change Access Level
                </button>
            </form>
        </div>
        </ul>
    </main>
    <footer>
    </footer>
</body>

<script type="module">
   import {displayAccount, displayPost, displayComments} from "../logic/DELETE.logic.js"
   document.addEventListener('DOMContentLoaded', function() {
    const searchAccDelete =  document.getElementById("searchAccount");
    const searchPostDelete = document.getElementById("searchPost");
    const searchCommentDelete = document.getElementById("searchComment")
    const searchAccPromote = document.getElementById("searchAcc")
    
    if (searchAccDelete){
        searchAccDelete.addEventListener('click', function (event) {
                event.preventDefault();
                displayAccount(event, "delete");
            });
    }
    
    if (searchPostDelete){
        searchPostDelete.addEventListener('click', function (event) {
            event.preventDefault();
            displayPost(event);
        });
    }

    
    if (searchCommentDelete){
        searchCommentDelete.addEventListener('click', function (event) {
            event.preventDefault();
            displayComments(event);
        });
    }

    if (searchAccPromote){
        searchAccPromote.addEventListener('click', function (event) {
            event.preventDefault();
            displayAccount(event, "changePerm");
        });
    }

   })
    
</script>

</html>
